{"ast":null,"code":"import { useState, useEffect } from \"react\";\n\nconst useFetch = async (props, searchInput) => {\n  const [stateMovies, setStateMovies] = useState([]); //   let myInput = searchInput;\n  //   console.log(myInput);\n\n  useEffect(() => {\n    async function fetch() {\n      await FetchingTheMovies(searchInput);\n    }\n\n    fetch(); // return setStateMovies([]);\n  }, [searchInput]);\n\n  const FetchingTheMovies = async searchInput => {\n    let movieUrl = \"\";\n    let myMovies = [];\n    let id_info = [];\n    let urlString = \"\";\n    let baseUrl = \"\";\n    let midUrl = \"\";\n    let endUrl = \"\";\n\n    if (searchInput !== \"\" || !props.isSearched) {\n      console.log(props.baseSearchUrl);\n\n      if (props.baseSearchUrl) {\n        baseUrl = props.baseSearchUrl;\n        midUrl = searchInput;\n        endUrl = props.API_KEY_SEARCH;\n      } else {\n        baseUrl = props.basePopularUrl + props.baseUpcomingUrl + props.baseNowPlayingUrl;\n        endUrl = props.API_KEY_MOVIE;\n      }\n\n      urlString = baseUrl.concat(midUrl, endUrl);\n      console.log(\"url \" + urlString + \"inp is: \" + searchInput);\n      await fetch(urlString) // need to give urlString\n      .then(res => res.json()).then(json => {\n        for (const [i, result] of json.results.entries()) {\n          id_info[i] = result.id;\n        }\n      }).catch(error => console.log(error));\n      console.log(\"i am here\" + id_info);\n\n      for (const [i, id] of id_info.entries()) {\n        movieUrl = props.baseMovieUrl + id + props.API_KEY_MOVIE;\n        console.log(movieUrl);\n        myMovies[i] = await fetch(movieUrl).then(async res => await res.json()).then(async json => await json);\n      }\n\n      setStateMovies([...myMovies]);\n    }\n  };\n\n  console.log(stateMovies);\n  return stateMovies;\n};\n\nexport default useFetch;","map":{"version":3,"sources":["/Users/markgiliadov/my-imdb/src/containers/Movies/GenericMovies/useFetch.js"],"names":["useState","useEffect","useFetch","props","searchInput","stateMovies","setStateMovies","fetch","FetchingTheMovies","movieUrl","myMovies","id_info","urlString","baseUrl","midUrl","endUrl","isSearched","console","log","baseSearchUrl","API_KEY_SEARCH","basePopularUrl","baseUpcomingUrl","baseNowPlayingUrl","API_KEY_MOVIE","concat","then","res","json","i","result","results","entries","id","catch","error","baseMovieUrl"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\n\nconst useFetch = async (props, searchInput) => {\n  const [stateMovies, setStateMovies] = useState([]);\n  //   let myInput = searchInput;\n  //   console.log(myInput);\n  useEffect(() => {\n    async function fetch() {\n      await FetchingTheMovies(searchInput);\n    }\n    fetch();\n    // return setStateMovies([]);\n  }, [searchInput]);\n  const FetchingTheMovies = async (searchInput) => {\n    let movieUrl = \"\";\n    let myMovies = [];\n    let id_info = [];\n    let urlString = \"\";\n    let baseUrl = \"\";\n    let midUrl = \"\";\n    let endUrl = \"\";\n    if (searchInput !== \"\" || !props.isSearched) {\n      console.log(props.baseSearchUrl);\n      if (props.baseSearchUrl) {\n        baseUrl = props.baseSearchUrl;\n        midUrl = searchInput;\n        endUrl = props.API_KEY_SEARCH;\n      } else {\n        baseUrl =\n          props.basePopularUrl +\n          props.baseUpcomingUrl +\n          props.baseNowPlayingUrl;\n\n        endUrl = props.API_KEY_MOVIE;\n      }\n      urlString = baseUrl.concat(midUrl, endUrl);\n      console.log(\"url \" + urlString + \"inp is: \" + searchInput);\n      await fetch(urlString) // need to give urlString\n        .then((res) => res.json())\n        .then((json) => {\n          for (const [i, result] of json.results.entries()) {\n            id_info[i] = result.id;\n          }\n        })\n        .catch((error) => console.log(error));\n      console.log(\"i am here\" + id_info);\n      for (const [i, id] of id_info.entries()) {\n        movieUrl = props.baseMovieUrl + id + props.API_KEY_MOVIE;\n        console.log(movieUrl);\n        myMovies[i] = await fetch(movieUrl)\n          .then(async (res) => await res.json())\n          .then(async (json) => await json);\n      }\n      setStateMovies([...myMovies]);\n    }\n  };\n  console.log(stateMovies);\n  return stateMovies;\n};\n\nexport default useFetch;\n"]},"metadata":{},"sourceType":"module"}