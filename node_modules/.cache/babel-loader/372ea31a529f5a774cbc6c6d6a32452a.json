{"ast":null,"code":"import React, { useState, useEffect } from \"react\";\n\nconst useFetch = props => {\n  const [stateIds, setStateIds] = useState([]);\n  const [stateMovies, setStateMovies] = useState([]);\n  const [inputEntered, setInputEntered] = useState(true);\n  let searchInput = props.searchInput;\n  useEffect(() => {\n    fetchingTheMovies(searchInput);\n  }, []);\n\n  const fetchingTheMovies = async searchInput => {\n    let movieUrl = \"\";\n    let myMovies = [];\n    let id_info = [];\n    let urlString = \"\";\n\n    if (searchInput !== \"\") {\n      urlString = props.baseSearchUrl.concat(searchInput, props.API_KEY_SEARCH);\n      console.log(\"url \" + urlString + \"inp \" + searchInput);\n      await fetch(urlString) // need to give urlString\n      .then(res => res.json()).then(json => {\n        for (const [i, result] of json.results.entries()) {\n          id_info[i] = result.id;\n        }\n      }).catch(error => console.log(error));\n      setStateIds(id_info);\n\n      for (const [i, id] of stateIds.entries()) {\n        movieUrl = props.baseMovieUrl + id + props.API_KEY_MOVIE;\n        myMovies[i] = await fetch(movieUrl).then(res => res.json()).then(json => {\n          return json;\n        });\n      }\n\n      setStateMovies(prev => [...prev, ...myMovies]);\n      console.log(myMovies);\n      setInputEntered(true);\n    } else setInputEntered(false);\n  };\n\n  console.log(stateMovies);\n  return [stateMovies, inputEntered];\n};\n\nexport default useFetch;","map":{"version":3,"sources":["/Users/markgiliadov/my-imdb/src/containers/Movies/GenericMovies/useFetch.js"],"names":["React","useState","useEffect","useFetch","props","stateIds","setStateIds","stateMovies","setStateMovies","inputEntered","setInputEntered","searchInput","fetchingTheMovies","movieUrl","myMovies","id_info","urlString","baseSearchUrl","concat","API_KEY_SEARCH","console","log","fetch","then","res","json","i","result","results","entries","id","catch","error","baseMovieUrl","API_KEY_MOVIE","prev"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAC1B,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACM,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACQ,YAAD,EAAeC,eAAf,IAAkCT,QAAQ,CAAC,IAAD,CAAhD;AACA,MAAIU,WAAW,GAAGP,KAAK,CAACO,WAAxB;AACAT,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,iBAAiB,CAACD,WAAD,CAAjB;AACD,GAFQ,EAEN,EAFM,CAAT;;AAGA,QAAMC,iBAAiB,GAAG,MAAOD,WAAP,IAAuB;AAC/C,QAAIE,QAAQ,GAAG,EAAf;AACA,QAAIC,QAAQ,GAAG,EAAf;AACA,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIC,SAAS,GAAG,EAAhB;;AACA,QAAIL,WAAW,KAAK,EAApB,EAAwB;AACtBK,MAAAA,SAAS,GAAGZ,KAAK,CAACa,aAAN,CAAoBC,MAApB,CAA2BP,WAA3B,EAAwCP,KAAK,CAACe,cAA9C,CAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAASL,SAAT,GAAqB,MAArB,GAA8BL,WAA1C;AACA,YAAMW,KAAK,CAACN,SAAD,CAAL,CAAiB;AAAjB,OACHO,IADG,CACGC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADX,EAEHF,IAFG,CAEGE,IAAD,IAAU;AACd,aAAK,MAAM,CAACC,CAAD,EAAIC,MAAJ,CAAX,IAA0BF,IAAI,CAACG,OAAL,CAAaC,OAAb,EAA1B,EAAkD;AAChDd,UAAAA,OAAO,CAACW,CAAD,CAAP,GAAaC,MAAM,CAACG,EAApB;AACD;AACF,OANG,EAOHC,KAPG,CAOIC,KAAD,IAAWZ,OAAO,CAACC,GAAR,CAAYW,KAAZ,CAPd,CAAN;AAQA1B,MAAAA,WAAW,CAACS,OAAD,CAAX;;AACA,WAAK,MAAM,CAACW,CAAD,EAAII,EAAJ,CAAX,IAAsBzB,QAAQ,CAACwB,OAAT,EAAtB,EAA0C;AACxChB,QAAAA,QAAQ,GAAGT,KAAK,CAAC6B,YAAN,GAAqBH,EAArB,GAA0B1B,KAAK,CAAC8B,aAA3C;AACApB,QAAAA,QAAQ,CAACY,CAAD,CAAR,GAAc,MAAMJ,KAAK,CAACT,QAAD,CAAL,CACjBU,IADiB,CACXC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADG,EAEjBF,IAFiB,CAEXE,IAAD,IAAU;AACd,iBAAOA,IAAP;AACD,SAJiB,CAApB;AAKD;;AACDjB,MAAAA,cAAc,CAAE2B,IAAD,IAAU,CAAC,GAAGA,IAAJ,EAAU,GAAGrB,QAAb,CAAX,CAAd;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAYP,QAAZ;AACAJ,MAAAA,eAAe,CAAC,IAAD,CAAf;AACD,KAvBD,MAuBOA,eAAe,CAAC,KAAD,CAAf;AACR,GA7BD;;AA8BAU,EAAAA,OAAO,CAACC,GAAR,CAAYd,WAAZ;AACA,SAAO,CAACA,WAAD,EAAcE,YAAd,CAAP;AACD,CAxCD;;AA0CA,eAAeN,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nconst useFetch = (props) => {\n  const [stateIds, setStateIds] = useState([]);\n  const [stateMovies, setStateMovies] = useState([]);\n  const [inputEntered, setInputEntered] = useState(true);\n  let searchInput = props.searchInput;\n  useEffect(() => {\n    fetchingTheMovies(searchInput);\n  }, []);\n  const fetchingTheMovies = async (searchInput) => {\n    let movieUrl = \"\";\n    let myMovies = [];\n    let id_info = [];\n    let urlString = \"\";\n    if (searchInput !== \"\") {\n      urlString = props.baseSearchUrl.concat(searchInput, props.API_KEY_SEARCH);\n      console.log(\"url \" + urlString + \"inp \" + searchInput);\n      await fetch(urlString) // need to give urlString\n        .then((res) => res.json())\n        .then((json) => {\n          for (const [i, result] of json.results.entries()) {\n            id_info[i] = result.id;\n          }\n        })\n        .catch((error) => console.log(error));\n      setStateIds(id_info);\n      for (const [i, id] of stateIds.entries()) {\n        movieUrl = props.baseMovieUrl + id + props.API_KEY_MOVIE;\n        myMovies[i] = await fetch(movieUrl)\n          .then((res) => res.json())\n          .then((json) => {\n            return json;\n          });\n      }\n      setStateMovies((prev) => [...prev, ...myMovies]);\n      console.log(myMovies);\n      setInputEntered(true);\n    } else setInputEntered(false);\n  };\n  console.log(stateMovies);\n  return [stateMovies, inputEntered];\n};\n\nexport default useFetch;\n"]},"metadata":{},"sourceType":"module"}